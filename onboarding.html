<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Opento — Build Your Agent</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
  <script src="config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="lib/supabase-client.js"></script>
  <script src="lib/session.js"></script>
</head>
<body class="onboarding-page">
  <div class="app-nav">
    <div class="container" style="gap:12px;">
      <div class="brand"><img class="brand-logo" src="assets/logo.svg" alt=""><div class="brand-name">Opento</div></div>
      <div class="goal"><span class="small">You're</span> <div class="meter"><div class="fill" style="width:0;"></div></div> <span class="small">to earning</span></div>
      <div class="progress" style="flex:1; height:8px; background:#eef2ff; border-radius:999px; overflow:hidden;"><div class="bar" style="height:100%; width:0; background:linear-gradient(90deg, #2D6FFF, #2EE6A6);"></div></div>
      <div class="step-indicator small">Step 1 of 6</div>
    </div>
  </div>

  <div class="container section onboarding-container">
    <div class="wizard">
      <!-- Step 1: Tell us about yourself -->
      <div class="step" data-step="1">
        <div class="step-content">
          <div class="step-header">
            <div class="step-number">1</div>
            <h2>Tell us about yourself</h2>
            <p class="sub">Help us understand your background so we can match you with the right opportunities.</p>
          </div>
          <div class="inputs">
            <label class="input">
              <span>Years of experience</span>
              <select id="years" required>
                <option value="">Select years...</option>
                <option value="0">0 - Just starting</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6" selected>6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="12">12</option>
                <option value="15">15</option>
                <option value="18">18</option>
                <option value="20">20+</option>
              </select>
            </label>
            <label class="input">
              <span>Location (city, region)</span>
              <input id="location" type="text" list="locList" placeholder="e.g., Austin, TX" required>
              <div class="small muted">Your timezone helps with scheduling</div>
            </label>
            <label class="input" style="grid-column: 1 / -1;">
              <span>Your skills</span>
              <div class="skills-selector">
                <input id="skillsInput" type="text" placeholder="Start typing to search skills..." autocomplete="off">
                <input id="skills" type="hidden" required>
                
                <!-- Custom dropdown (hidden by default) -->
                <div id="skillsDropdown" class="skills-dropdown" style="display: none;">
                  <div class="skills-dropdown-loading">Loading skills...</div>
                </div>
              </div>
              
              <!-- Selected skills shown as chips -->
              <div id="skillsChips" class="skills-chips" style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; min-height: 32px;"></div>
              <div class="small muted">Start typing to search, click to add. Click X on chips to remove.</div>
            </label>
          </div>
          <datalist id="locList">
            <option>Austin, TX</option>
            <option>San Francisco, CA</option>
            <option>New York, NY</option>
            <option>Seattle, WA</option>
            <option>Los Angeles, CA</option>
            <option>Chicago, IL</option>
            <option>Boston, MA</option>
            <option>Denver, CO</option>
            <option>London, UK</option>
            <option>Berlin, DE</option>
            <option>Toronto, ON</option>
            <option>Remote</option>
          </datalist>
          <div class="step-actions">
            <button class="btn primary" data-next>Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 2: Your online presence -->
      <div class="step" data-step="2">
        <div class="step-content">
          <div class="step-header">
            <div class="step-number">2</div>
            <h2>Your online presence</h2>
            <p class="sub">Optional: Add your professional profiles to boost trust and match quality.</p>
          </div>
          <div class="inputs">
            <label class="input">
              <span>LinkedIn URL (optional)</span>
              <input id="linkedin" type="url" placeholder="https://www.linkedin.com/in/you">
              <div class="small muted">Signals professional presence</div>
            </label>
            <label class="input">
              <span>Twitter / X URL (optional)</span>
              <input id="twitter" type="url" placeholder="https://x.com/you">
              <div class="small muted">Shows thought leadership</div>
            </label>
            <label class="input">
              <span>Instagram URL (optional)</span>
              <input id="instagram" type="url" placeholder="https://instagram.com/you">
              <div class="small muted">For creator & brand collabs</div>
            </label>
          </div>
          <div class="step-actions">
            <button class="btn gray" data-back>Back</button>
            <button class="btn primary" data-next>Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 3: Your availability -->
      <div class="step" data-step="3">
        <div class="step-content">
          <div class="step-header">
            <div class="step-number">3</div>
            <h2>Your availability</h2>
            <p class="sub">How many hours per week would you like to dedicate to opportunities?</p>
          </div>
          <div class="inputs">
            <label class="input availability-slider">
              <span>Weekly hours target</span>
              <input id="hours" type="range" min="0" max="20" value="6" aria-label="Weekly hours target">
              <span id="hoursVal" class="chip large-chip" aria-live="polite">6 hrs / week</span>
              <div class="small muted">Don't worry, you can adjust this anytime</div>
            </label>
            <div class="card estimate-card">
              <div class="small muted">Potential monthly earnings</div>
              <div id="earningsEstimate" class="estimate-value">$0</div>
              <div class="small muted">Based on your profile and market rates</div>
            </div>
          </div>
          <div class="step-actions">
            <button class="btn gray" data-back>Back</button>
            <button class="btn primary" data-next>Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 4: What are you open to? -->
      <div class="step" data-step="4">
        <div class="step-content">
          <div class="step-header">
            <div class="step-number">4</div>
            <h2>What are you open to?</h2>
            <p class="sub">Select the types of work you'd like your agent to find for you.</p>
          </div>
          <div class="options-grid">
            <div class="option-card" data-category="audits">
              <div class="option-card-header">
                <div class="switch on" data-label="Growth audits"></div>
                <h3>Growth audits & consults</h3>
              </div>
              <p class="small">30-minute deep dives on CAC, retention, and channel mix goals.</p>
            </div>
            <div class="option-card" data-category="campaigns">
              <div class="option-card-header">
                <div class="switch on" data-label="Campaign optimization"></div>
                <h3>Campaign setup & optimization</h3>
              </div>
              <p class="small">Hands-on experiment sprints and reporting clean-up.</p>
            </div>
            <div class="option-card" data-category="retainers">
              <div class="option-card-header">
                <div class="switch on" data-label="Fractional retainers"></div>
                <h3>Fractional retainers</h3>
              </div>
              <p class="small">8–12 hr/week support with async updates.</p>
            </div>
            <div class="option-card" data-category="labeling">
              <div class="option-card-header">
                <div class="switch on" data-label="Data labeling"></div>
                <h3>Data labeling & QA</h3>
              </div>
              <p class="small">Tagging hooks, funnel QA, event taxonomy clean-up.</p>
            </div>
          </div>
          <div class="step-actions">
            <button class="btn gray" data-back>Back</button>
            <button class="btn primary" data-next>Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 5: Set your rates -->
      <div class="step" data-step="5">
        <div class="step-content">
          <div class="step-header">
            <div class="step-number">5</div>
            <h2>Set your rates</h2>
            <p class="sub">Define your minimum rates and auto-book windows. Your agent will auto-decline anything below these.</p>
          </div>
          <div class="inputs">
            <label class="input">
              <span>Consult minimum ($ per 30 minutes)</span>
              <input id="floor" type="range" min="30" max="200" step="5" value="75" aria-label="Consult minimum per 30 minutes">
              <span id="floorVal" class="chip" aria-live="polite">$75</span>
              <div class="small muted">Auto-declines briefs below this</div>
            </label>
            <label class="input">
              <span>Async sprint minimum ($ per 5 minutes)</span>
              <input id="microfloor" type="range" min="5" max="40" step="1" value="12" aria-label="Async sprint minimum per 5 minutes">
              <span id="microVal" class="chip" aria-live="polite">$12</span>
              <div class="small muted">For quick tasks and QA work</div>
            </label>
            <label class="input">
              <span>Auto-book windows</span>
              <select id="autoWindow">
                <option>Mon–Thu 11a–4p CT</option>
                <option>Mon–Fri Lunch hours</option>
                <option>Tue & Thu Evenings</option>
              </select>
              <div class="small muted">Your Rep only books in these windows</div>
            </label>
          </div>
          <div class="step-actions">
            <button class="btn gray" data-back>Back</button>
            <button class="btn primary" data-next>Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 6: Privacy preferences -->
      <div class="step" data-step="6">
        <div class="step-content">
          <div class="step-header">
            <div class="step-number">6</div>
            <h2>Privacy & consent</h2>
            <p class="sub">Control what you share and when your identity is revealed.</p>
          </div>
          <div class="privacy-section">
            <div class="scope-card">
              <h3>What will be shared</h3>
              <div class="scope">
                <div class="item allow">✔ Share: role, anonymized KPIs, case studies</div>
                <div class="item deny">✖ Hide: employer names, exact spend history</div>
              </div>
            </div>
            <div class="option-card privacy-card">
              <div class="option-card-header">
                <div class="switch on" data-label="Anonymous first"></div>
                <h3>Anonymous first</h3>
              </div>
              <p class="small">Identity reveals only after you accept + escrow is confirmed.</p>
            </div>
            <div class="option-card privacy-card">
              <div class="option-card-header">
                <div class="switch on" data-label="Consent reminders"></div>
                <h3>Consent reminders</h3>
              </div>
              <p class="small">Show what's shared before each accept so you stay in control.</p>
            </div>
          </div>
          <div class="step-actions">
            <button class="btn gray" data-back>Back</button>
            <button class="btn primary large-btn" data-finish>Build my agent</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Preview Panel (Sticky on desktop) -->
    <div class="preview-panel">
      <div class="badge"><span class="dot"></span> Live Preview</div>
      <div class="preview-content">
        <div class="preview-card-small">
          <div class="small muted">Profile</div>
          <div id="previewYears" class="preview-value">—</div>
          <div id="previewLocation" class="preview-value">—</div>
          <div id="previewSkills" class="preview-chips"></div>
        </div>
        <div class="preview-card-small">
          <div class="small muted">Rates</div>
          <div id="previewFloor" class="preview-value">$75 / 30m</div>
          <div id="previewMicro" class="preview-value">$12 / 5m</div>
        </div>
        <div class="preview-card-small">
          <div class="small muted">Availability</div>
          <div id="previewHours" class="preview-value">6 hrs / week</div>
          <div id="previewWindow" class="preview-value">Mon–Thu 11a–4p CT</div>
        </div>
        <div class="preview-card-highlight">
          <div class="small muted">Monthly estimate</div>
          <div id="previewEstimate" class="preview-estimate">$0</div>
        </div>
        <div id="previewCategories" class="preview-chips-list"></div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script src="lib/skills-selector.js"></script>
  <script src="lib/onboarding-integration.js"></script>
  <script>
    // Initialize skills selector when page loads
    document.addEventListener('DOMContentLoaded', () => {
      if (window.initializeSkillsSelector) {
        window.initializeSkillsSelector();
      }
    });
  </script>
</body>
</html>
