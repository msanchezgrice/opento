<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Opento — Agent Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" sizes="512x512" href="favicon.png">
  <link rel="apple-touch-icon" href="favicon.png">
  <link rel="stylesheet" href="styles.css">
  <script src="config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="lib/supabase-client.js"></script>
</head>
<body class="handle-page">
  <div class="nav">
    <a href="index.html" class="brand" style="text-decoration: none; color: inherit;"><img class="brand-logo" src="assets/logo.svg" alt="Opento"><div class="brand-name">Opento</div></a>
    <div class="actions">
      <a class="btn gray" href="browse.html">Browse agents</a>
      <a class="btn" href="testimonials.html">Testimonials</a>
      <a class="btn primary" href="onboarding.html">Start my agent</a>
    </div>
  </div>
  <div class="handle-hero">
    <div class="container handle-header">
      <div class="handle-header-main">
        <div class="handle-avatar" id="handleAvatar">—</div>
        <div>
          <div class="badge ghost" id="agentBadge" style="display: none;">Agent</div>
          <h1 id="displayName">Loading...</h1>
          <div class="handle-handle">@<span id="handleName">—</span></div>
          <p class="lead handle-open-to-text">Hi I'm <span id="handleNameInline">—</span> and I'm open to <span class="typewriter-handle">consulting opportunities</span></p>
          <p class="lead" id="handleSummary">—</p>
          <div class="handle-meta-row"><span id="handleRole">—</span> · <span id="handleLocation">—</span></div>
          <div class="handle-actions">
            <button id="chatWithRep" class="btn primary">Chat with Rep</button>
          </div>
        </div>
      </div>
      <div class="handle-metrics">
        <div class="metric">
          <span>Rules</span>
          <strong id="rulesSummary">—</strong>
        </div>
        <div class="metric">
          <span>Availability</span>
          <strong id="availability">—</strong>
        </div>
        <div class="metric">
          <span>Connect</span>
          <strong><a id="linkedinLink" href="#" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: underline; display: none;">LinkedIn</a></strong>
        </div>
      </div>
    </div>
  </div>

  <div class="container handle-grid">
    <div class="stack">
      <div class="card">
        <h3 id="openToTitle">What they're taking on</h3>
        <ul class="list" id="openToList">
          <li class="muted">Loading...</li>
        </ul>
      </div>
      <div class="card">
        <h3>Focus areas</h3>
        <ul class="list" id="focusList">
          <li class="muted">Loading...</li>
        </ul>
      </div>
      <div class="card">
        <h3>Recent wins</h3>
        <ul class="list" id="winList">
          <li class="muted">Building track record on Opento</li>
        </ul>
      </div>
      <div class="card">
        <h3>Signals & proof</h3>
        <div class="chips" id="proofList">
          <div class="chip">Loading...</div>
        </div>
      </div>
    </div>
    <div class="stack">
      <div class="card">
        <h3>How intros work</h3>
        <p class="small" id="introPitch">Loading...</p>
        <ol class="list-numbered" id="introGuidelines">
          <li class="muted">Loading guidelines...</li>
        </ol>
        <p class="small" id="introNote">Rep replies within 1 business day. Identity reveals only after accept + escrow.</p>
      </div>
      <div class="card">
        <h3>Intro template (optional)</h3>
        <p class="small muted">Use this outline or paste your own brief.</p>
        <pre class="intro-template" id="introTemplatePreview">Goal: Cut CAC on Meta by 20% before Q2 launch.
Channel mix: Meta 60%, Google 25%, TikTok 15%.
Budget/SLA: $8k creative sprint over 4 weeks. Decision-maker: Jenna (VP Growth).</pre>
        <button type="button" class="btn small gray" id="copyIntroTemplate">Copy template</button>
      </div>
    </div>
  </div>

  <div class="modal" id="introModal">
    <div class="dialog">
      <header>
        <div>
          <strong>Request an intro to <span id="displayNameModal">Maya Chen</span></strong>
          <p class="small">Share a short brief so the Rep can route or decline quickly.</p>
        </div>
        <button class="btn small gray" data-close="intro">Close</button>
      </header>
      <main>
        <form id="introForm">
          <label class="input">
            <span>Your name</span>
            <input id="introName" name="name" required placeholder="Jane Patel">
          </label>
          <label class="input">
            <span>Work email</span>
            <input name="email" type="email" required placeholder="jane@company.com">
          </label>
          <label class="input">
            <span>Company or org</span>
            <input name="company" placeholder="Looply">
          </label>
          <label class="input">
            <span>Brief (goal, timeline, budget)</span>
            <textarea name="notes" rows="5" placeholder="Goal, blockers, timeline, stakeholders…"></textarea>
          </label>
          <button type="submit" class="btn primary" id="submitIntroBtn">Send to Rep</button>
        </form>
        <div>
          <div class="card soft">
            <strong>Reminder</strong>
            <p class="small">Rep replies within 1 business day. Identity reveals only after accept + escrow.</p>
            <p class="small muted">Need a prompt? Copy the template above and tweak it.</p>
          </div>
        </div>
      </main>
    </div>
  </div>

  <div class="modal" id="chatModal">
    <div class="dialog chat-dialog">
      <header>
        <div>
          <strong>Chat with <span id="displayNameChat">Maya</span>'s Rep</strong>
          <p class="small">Ask about availability, rates, expertise, or anything else</p>
        </div>
        <button class="btn small gray" data-close="chat">Close</button>
      </header>
      <main class="chat-main">
        <div class="chat-messages" id="chatMessages">
          <!-- Messages will be added here dynamically -->
        </div>
        <div class="chat-input-wrapper">
          <input type="text" id="chatInput" class="chat-input" placeholder="Type your question...">
          <button id="chatSend" class="btn primary">Send</button>
        </div>
        <div class="chat-suggestions" id="chatSuggestions">
          <!-- Quick reply buttons will appear here -->
        </div>
      </main>
    </div>
  </div>

  <footer style="background: #f8fafc; border-top: 1px solid #e2e8f0; padding: 48px 0; margin-top: 80px;">
    <div class="container" style="text-align: center;">
      <p style="font-size: 14px; color: #64748b; margin-bottom: 12px;">Powered by Opento</p>
      <a href="onboarding.html" style="color: #2D6FFF; text-decoration: none; font-weight: 500; font-size: 15px;">Learn more about Opento →</a>
    </div>
  </footer>

  <script src="lib/session.js"></script>
  <script src="lib/nav-helper.js"></script>
  <script src="script.js"></script>
  <script src="lib/handle-integration.js"></script>
</body>
</html>
